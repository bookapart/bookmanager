<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>æˆè¯­åº”ç”¨</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: 'å¾®è½¯é›…é»‘', 'Microsoft YaHei', 'Segoe UI', sans-serif;
    }

    body {
      margin: 0;
      padding: 0;
      background: #f5f5f5;
      color: #333;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
    }

    h1, h2 {
      text-align: center;
      color: #2c3e50;
    }

    .tabs {
      display: flex;
      justify-content: center;
      margin: 20px 0;
      gap: 10px;
      flex-wrap: wrap;
    }

    .tab {
      padding: 10px 20px;
      background: #ecf0f1;
      border: none;
      cursor: pointer;
      border-radius: 5px;
      transition: background 0.3s;
    }

    .tab.active {
      background: #3498db;
      color: white;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .search-box {
      text-align: center;
      margin-bottom: 20px;
    }

    .search-box input {
      padding: 10px;
      width: 70%;
      max-width: 400px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .search-box button {
      padding: 10px 20px;
      margin-left: 10px;
      background: #3498db;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .idiom-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }

    .idiom-card {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s;
    }

    .idiom-card:hover {
      transform: translateY(-5px);
    }

    .exam-section {
      margin-bottom: 40px;
    }

    .exam-section h3 {
      color: #2980b9;
      border-bottom: 2px solid #3498db;
      padding-bottom: 5px;
    }

    .idiom-list {
      margin-top: 10px;
    }

    .idiom-item {
      background: #fff8e1;
      padding: 15px;
      margin-bottom: 10px;
      border-left: 4px solid #fbc02d;
    }

    .game-container {
      text-align: center;
    }

    .options {
      margin: 20px 0;
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }

    .option {
      padding: 15px;
      background: #3498db;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .option:hover {
      background: #2980b9;
    }

    .feedback {
      margin: 20px 0;
      font-size: 1.2em;
    }

    .correct {
      color: #27ae60;
    }

    .incorrect {
      color: #e74c3c;
    }

    @media (max-width: 600px) {
      .tabs {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>æˆè¯­åº”ç”¨</h1>
    <nav class="tabs">
      <button class="tab active" data-tab="home">é¦–é¡µ</button>
      <button class="tab" data-tab="dictionary">æˆè¯­è¯å…¸</button>
      <button class="tab" data-tab="igcse">IGCSEçœŸé¢˜</button>
      <button class="tab" data-tab="game">æˆè¯­æ¸¸æˆ</button>
    </nav>

    <div class="tab-content active" id="home">
      <h2>æ¯æ—¥æ¨è</h2>
      <div id="random-idioms" class="idiom-grid"></div>
    </div>

    <div class="tab-content" id="dictionary">
      <h2>æˆè¯­è¯å…¸</h2>
      <div class="search-box">
        <input type="text" id="search-input" placeholder="è¾“å…¥æˆè¯­æœç´¢..." />
        <button onclick="searchIdiom()">æœç´¢</button>
      </div>
      <div id="search-results"></div>
    </div>

    <div class="tab-content" id="igcse">
      <h2>IGCSEçœŸé¢˜æˆè¯­</h2>
      <div id="igcse-idioms"></div>
    </div>

    <div class="tab-content" id="game">
      <h2>æˆè¯­æ¸¸æˆ</h2>
      <div id="game-container">
        <p id="question"></p>
        <div class="options" id="options"></div>
        <div class="feedback" id="feedback"></div>
        <button onclick="nextQuestion()">ä¸‹ä¸€é¢˜</button>
      </div>
    </div>
  </div>

  <script>
    let allIdioms = [];
    let igcseData = {
      "0509_s16_in_11": [
        "ä¸€æˆä¸å˜",
        "ä¸€ç›®äº†ç„¶",
        "æ¯æ¯ç›¸å…³",
        "æ—¥æ–°æœˆå¼‚",
        "ç™¾æ€ä¸è§£"
      ],
      "0509_s16_in_13": ["å¹³å¿ƒé™æ°”", "æ½œç§»é»˜åŒ–"],
      "0509_s17_in_11": [
        "å¤©æ˜åœ°æš—",
        "å±±ç©·æ°´å°½",
        "å¿µå¿µä¸å¿˜",
        "æ¯æ¯ç›¸å…³",
        "æ— ç©·æ— å°½",
        "æŸ³æš—èŠ±æ˜",
        "éšé‡è€Œå®‰",
        "é’å±±ç»¿æ°´"
      ],
      "0509_s17_in_13": [
        "ä¸åŒå…¶çƒ¦",
        "äº‘æ³¥ä¹‹åˆ«",
        "å¹³æ·¡æ— å¥‡",
        "æˆªç„¶ä¸åŒ",
        "é€šå®µè¾¾æ—¦"
      ],
      "0509_s18_in_11": [
        "å¤å¾€ä»Šæ¥",
        "æƒ¶æƒ¶ä¸å®‰",
        "æ¸¸å±±ç©æ°´",
        "ç‰¹ç«‹ç‹¬è¡Œ",
        "ç¦»ç»å›é“"
      ],
      "0509_s18_in_13": [
        "ä¸çŸ¥ä¸è§‰",
        "ä»¥å·±åº¦äºº",
        "å¤šæ­¤ä¸€ä¸¾",
        "é•¿æ­¤ä»¥å¾€"
      ],
      "0509_s19_in_11": [
        "ä¸åˆæ—¶å®œ",
        "äººæ»¡ä¸ºæ‚£",
        "åˆ€è€•ç«ç§",
        "å´‡å±±å³»å²­",
        "æˆç¾¤ç»“é˜Ÿ",
        "æ”¿å‡ºå¤šé—¨",
        "æµ©æµ©è¡è¡",
        "é£åœŸäººæƒ…"
      ],
      "0509_s19_in_12": [
        "ä¸€æ‰«è€Œç©º",
        "åŠé€”è€ŒåºŸ",
        "å¿ƒè¡€æ¥æ½®",
        "æ— è®ºå¦‚ä½•",
        "æ¬²é€Ÿåˆ™ä¸è¾¾",
        "é©¬ä¸åœè¹„"
      ],
      "0509_s19_in_13": [
        "ä¸€ä¸¾ä¸€åŠ¨",
        "åƒåƒä¸‡ä¸‡",
        "åƒå˜ä¸‡åŒ–",
        "å¿ƒæœ‰çµçŠ€ä¸€ç‚¹é€š",
        "æ€¡ç„¶è‡ªå¾—",
        "æ‚£å¾—æ‚£å¤±",
        "æ— è®ºå¦‚ä½•",
        "æ²¹ç›é…±é†‹",
        "æ´¥æ´¥æœ‰å‘³",
        "æµ·é˜”å¤©ç©º",
        "ç”œè¨€èœœè¯­",
        "éƒéƒè‘±è‘±"
      ],
      "0509_s20_in_11": [
        "å‹¤èƒ½è¡¥æ‹™",
        "åæœ‰å…«ä¹",
        "å¾®ä¸è¶³é“",
        "æ— èƒ½ä¸ºåŠ›",
        "æœªé›¨ç»¸ç¼ª",
        "æŸæ‰‹æ— ç­–",
        "ç‹¬æ¥ç‹¬å¾€"
      ],
      "0509_s20_in_13": ["ä¸€å›¢å’Œæ°”", "ä¸€æ¨¡ä¸€æ ·", "å…”èµ·é¹˜è½"],
      "0509_s21_in_12": [
        "åšå°ä¼ä½",
        "å¤©å—åœ°åŒ—",
        "å½’æ ¹ç»“åº•",
        "å¾—æ„æ´‹æ´‹",
        "å¿¿å¿¿ä¸å¹³",
        "é•¿åçŸ­å¹"
      ],
      "0509_s21_in_13": [
        "ä¸€è§†åŒä»",
        "å‡ºäººå¤´åœ°",
        "å°é¢˜å¤§åš",
        "æ— å¯åšé",
        "æ—¥ä¸Šä¸‰ç«¿",
        "è½»æ‰‹è½»è„š"
      ],
      "0509_s22_in_11": [
        "å¦™æ‰‹å›æ˜¥",
        "å¾·è‰ºåŒé¦¨",
        "æ˜‚é¦–æŒºèƒ¸",
        "è¨€è¿‡å…¶å®"
      ],
      "0509_s22_in_13": ["å‰è½¦ä¹‹é‰´", "éšå¿ƒæ‰€æ¬²"],
      "0509_s23_in_12": [
        "ä¸çŸ¥ä¸è§‰",
        "ä¸ç½®å¯å¦",
        "ä¸¾ä¸–æ— åŒ",
        "ä»¥å‡ä¹±çœŸ",
        "ä¼—æ‰€å‘¨çŸ¥",
        "å‡¡å¤«ä¿—å­",
        "å‘±å‘±å åœ°",
        "å·®ä¹‹æ¯«é‡ï¼Œå¤±ä¹‹åƒé‡Œ",
        "æŒä¹‹ä»¥æ†",
        "æœªé›¨ç»¸ç¼ª",
        "æ°´æ³„ä¸é€š",
        "æ¼«å±±éé‡",
        "ç‹¬å…·åŒ å¿ƒ",
        "è§é£è½¬èˆµ",
        "è¿‡ç›®ä¸å¿˜"
      ],
      "0509_s23_in_13": [
        "æœ‰é’±æœ‰åŠ¿",
        "ç å…‰å®æ°”",
        "é’¢ç­‹é“éª¨"
      ],
      "0509_s24_in_12": [
        "äº‹åŠåŠŸå€",
        "å–œæ€’æ— å¸¸",
        "å¿½å†·å¿½çƒ­"
      ],
      "0509_s24_in_13": [
        "å›«å›µåæ£",
        "æ…¢æ¡æ–¯ç†",
        "æ±—æµæµƒèƒŒ",
        "è¨€ä¼ èº«æ•™",
        "é‡åŠ›è€Œè¡Œ"
      ],
      "0509_s25_in_13": [
        "å‡ºå…¶ä¸æ„",
        "åƒç¯‡ä¸€å¾‹",
        "å“‘å£æ— è¨€",
        "å“­ç¬‘ä¸å¾—",
        "å¦‚é‡Šé‡è´Ÿ",
        "å­¤æ³¨ä¸€æ·",
        "å¿«äººå¿«è¯­",
        "æ ‡æ–°ç«‹å¼‚",
        "æ­£è¥Ÿå±å",
        "æ­£é¢œå‰è‰²",
        "ç†ç›´æ°”å£®",
        "ç³ç…æ»¡ç›®",
        "èƒ¸æœ‰æˆç«¹",
        "è¯­é‡å¿ƒé•¿",
        "è¹‘æ‰‹è¹‘è„š",
        "è¿…é›·ä¸åŠæ©è€³",
        "è¿›å¾·ä¿®ä¸š"
      ]
    };

    // åŠ è½½JSONæ•°æ®
    fetch('chengyu.json')
      .then(response => response.json())
      .then(data => {
        allIdioms = data;
        showHome();
        showIgcseIdioms();
      })
      .catch(error => console.error('åŠ è½½æ•°æ®å¤±è´¥:', error));

    // æ˜¾ç¤ºé¦–é¡µéšæœºæˆè¯­
    function showHome() {
      const randomIds = shuffle(allIdioms).slice(0, 3);
      const container = document.getElementById('random-idioms');
      container.innerHTML = randomIds.map(idiom => `
        <div class="idiom-card">
          <h3>${idiom.idiom}</h3>
          <p>${idiom.definition}</p>
        </div>
      `).join('');
    }

    // æœç´¢æˆè¯­
    function searchIdiom() {
      const input = document.getElementById('search-input').value.trim();
      const results = allIdioms.filter(idiom =>
        idiom.idiom.includes(input) || idiom.definition.includes(input)
      );
      const container = document.getElementById('search-results');
      container.innerHTML = results.length > 0 ?
        results.map(idiom => `
          <div class="idiom-card">
            <h3>${idiom.idiom}</h3>
            <p>${idiom.definition}</p>
          </div>
        `).join('') :
        '<p>æœªæ‰¾åˆ°ç›¸å…³æˆè¯­</p>';
    }

    // æ˜¾ç¤ºIGCSEçœŸé¢˜æˆè¯­
    function showIgcseIdioms() {
      const container = document.getElementById('igcse-idioms');
      container.innerHTML = Object.entries(igcseData).map(([exam, idioms]) => `
        <div class="exam-section">
          <h3>${exam}</h3>
          <div class="idiom-list">
            ${idioms.map(idiom => {
              const item = allIdioms.find(i => i.idiom === idiom);
              return `
                <div class="idiom-item">
                  <strong>${item.idiom}</strong>
                  <p>é‡Šä¹‰ï¼š${item.definition}</p>
                  <p>å‡ºå¤„ï¼š${exam}</p>
                </div>
              `;
            }).join('')}
          </div>
        </div>
      `).join('');
    }

    // åˆå§‹åŒ–æ¸¸æˆ
    let currentQuestion = null;

    function nextQuestion() {
      const randomIdiom = allIdioms[Math.floor(Math.random() * allIdioms.length)];
      const options = [randomIdiom.definition];

      while (options.length < 4) {
        const randomDef = allIdioms[Math.floor(Math.random() * allIdioms.length)].definition;
        if (!options.includes(randomDef)) {
          options.push(randomDef);
        }
      }

      shuffle(options);

      currentQuestion = {
        idiom: randomIdiom.idiom,
        correctIndex: options.indexOf(randomIdiom.definition)
      };

      document.getElementById('question').textContent = `è¯·é€‰æ‹©â€œ${randomIdiom.idiom}â€çš„æ­£ç¡®é‡Šä¹‰ï¼š`;
      document.getElementById('options').innerHTML = options.map((def, index) => `
        <button class="option" onclick="checkAnswer(${index})">${def}</button>
      `).join('');
      document.getElementById('feedback').textContent = '';
    }

    function checkAnswer(selectedIndex) {
      const feedback = document.getElementById('feedback');
      if (selectedIndex === currentQuestion.correctIndex) {
        feedback.textContent = 'æ­£ç¡®ï¼ğŸ‰';
        feedback.className = 'correct';
      } else {
        feedback.textContent = `é”™è¯¯ã€‚æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š${allIdioms.find(i => i.idiom === currentQuestion.idiom).definition}`;
        feedback.className = 'incorrect';
      }
    }

    // è¾…åŠ©å‡½æ•°
    function shuffle(array) {
      return [...array].sort(() => Math.random() - 0.5);
    }

    // æ ‡ç­¾é¡µåˆ‡æ¢
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

        tab.classList.add('active');
        document.getElementById(tab.dataset.tab).classList.add('active');
      });
    });

    // åˆå§‹åŒ–é¦–é¡µ
    window.onload = showHome;
  </script>
</body>
</html>